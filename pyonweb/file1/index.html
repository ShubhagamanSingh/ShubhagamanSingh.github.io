<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expression Solving Code</title>
</head>
<body>
    <textarea name="textarea" id="ta" cols="130" rows="80" readonly>
exp=input("Enter the expression: ")
# exp="3+4/2*6/2-3"
# print(exp)
num=["0","1","2","3","4","5","6","7","8","9"]
opr=["+","-","*","/","^"]
ob=["[","{","("]
cb=["]","}",")"]
n1=0
sopr=list()
snum=list()
snum.append("Values: ")
sopr.append("Operators: ")

def fopr():
    v1=snum.pop()
    v2=snum.pop()
    ov=sopr.pop()
    print("Operation between:\t",v2,ov,v1)
    if ov=="+":
        snum.append(v2+v1)
    elif ov=="-":
        snum.append(v2-v1)
    elif ov=="*":
        if v2==0:
            v2=1
        snum.append(v2*v1)
    elif ov=="/":
        snum.append(v2/v1)
    elif ov=="^":
        snum.append(v2**v1)
    print("snum after operation:\t",snum)
    print("sopr after operation:\t",sopr)

def addopr(i):
    n=len(sopr)-1
    if (exp[i] in ["+","-"] and sopr[n] in ["*","/","^"]) or (exp[i] in ["*","/"] and sopr[n]=="^"):
        fopr()
        addopr(i)
    elif (exp[i]=="+" and sopr[n]=="-") or (exp[i]=="*" and sopr[n]=="/"):
        fopr()
        addopr(i)
    
for i in range(len(exp)):
    # print("\nValue of i: ",i,"\n")
    if exp[i] in num:
        n2=int(exp[i])
        n2=n1*10+n2
        n1=n2
        if i==len(exp)-1:
            snum.append(n1)
    else:
        if n1 > 0:
            snum.append(n1)
        print("\nValue of i: ",i-1)
        print("Snum:\t\t",snum)
        n1=0
        print("\nValue of i: ",i)
        if exp[i] in ob:
            sopr.append(exp[i])
            print("Adding Braces:\t\t",sopr)
        elif exp[i] in cb:
            a=cb.index(exp[i])
            print("Value of a: ",sopr[len(sopr)-1])
            while(sopr[len(sopr)-1]!=ob[a]):
                fopr()
            sopr.pop()
            print("After deleting Braces:\t",sopr)
        elif exp[i] in opr:
            addopr(i)
            # if (exp[i] in ["+","-"] and sopr[len(sopr)-1] in ["*","/","^"]) or (exp[i] in ["*","/"] and sopr[len(sopr)-1]=="^"):
            #     fopr()
            # elif (exp[i]=="+" and sopr[len(sopr)-1]=="-") or (exp[i]=="*" and sopr[len(sopr)-1]=="/"):
            #     fopr()
            sopr.append(exp[i])
            print("Adding Operator:\t",sopr)
for i in range(1,len(snum)-1):
    fopr()

print("Solution is: ",snum[len(snum)-1])
    </textarea>
</body>
<script>
    var code=""
</script>
</html>